var DcUI=DcUI||{};(function(f,c,h){var a=Array.isArray||function(i){return typeof i==="object"&&Object.prototype.toString.call(i)==="[object Array]"};var g=function(i){return Object.prototype.toString.call(i)==="[object Function]"};function d(j){if(f(j.obj).length==0){return}this._settings=f.extend({obj:null,effect:"fade",autoPlay:true,start:0,duration:800,holdTime:3000,effectDuration:3000,onOneLoaded:null,onAllLoaded:null,beforeSwitch:null,afterSwitch:null,mouseDrag:false,PCMinSize:null,_holdAfterHover:true},j||{});var l=f(this._settings.obj),F=this;var H=["fade","slide","slide-vertical","shift-left","shift-right","shift-up","shift-down","turn-left","turn-right","turn-up","turn-down"],R=["turn-left","turn-right","turn-up","turn-down"],o=["unfold","unfold-vertical"];this._settings._supportEffects=H.concat(o);if(F._settings._supportEffects.indexOf(this._settings.effect)<0){this._settings.effect="fade"}l.addClass("dc-SlideShow");var p=l.children("ul").addClass("slides-list"),D=p.children("li").addClass("slide-item"),m=D.length,y=this._settings.start%m,A=y,O=0,r=[],s=false,Q=null,i,N,M,P,B;D.removeClass("active").eq(y).addClass("active");this.mobile=false;var J=navigator&&navigator.userAgent;if(J.toLowerCase().indexOf("android")>-1||(/iPad/i).test(J)||(/iPhone/i).test(J)){this.mobile=true;l.addClass("mobile-device")}this.mobileSize=false;if(this._settings.PCMinSize){var I=f(".dc-slider-size-query");if(I.length===0){I=f('<span class="dc-slider-size-query" style="display: none">\n<style>\n    .dc-slider-size-query { font-size: 0 }\n    @media (min-width:'+this._settings.PCMinSize+"px) {\n        .dc-slider-size-query { font-size: 16px }\n    }\n</style>\n</span>").appendTo(f("body"))}if(I.css("font-size")==="0px"){this.mobileSize=true}}else{this.mobileSize=this.mobile}if(this.mobileSize){l.addClass("mobile-deviceSize")}S();var k=document.createElement("img");r[0]=this.mobileSize?D.first().attr("mb-bg-src"):D.first().attr("bg-src");if(r[0]){k.src=r[0];f(k).one("load",function(){if(M==0){M=this.height*N/this.width;l.height(M)}l.addClass("loading");D.first().css("background-image","url("+r[0]+")");O++;g(F._settings.onOneLoaded)&&F._settings.onOneLoaded(D.first(),0);E()});if(k.complete){f(k).load()}}this.setOption=function(U,V){if(typeof U==="object"){for(var T in U){F._settings[T]=U[T]}}else{if(typeof U==="string"&&!!V){F._settings[U]=V}}};this.startAutoPlay=function(){K(true);F._settings.isAutoPlay=true};this.stopAutoPlay=function(){K(false);F._settings.isAutoPlay=false};this.setEffectMode=function(T){if(F._settings._supportEffects.indexOf(T)<0){T="fade"}F._settings.effect=T;n()};function n(){var T=F._settings.effect;B=l.find(".effect-layer");if(B.length>0){B.empty()}else{l.append('<div class="effect-layer"></div>');B=l.find(".effect-layer")}B.attr("class","effect-layer "+T);if(H.indexOf(F._settings.effect)>-1){if(R.indexOf(F._settings.effect)>-1){B.append('<div class="effect-slide curr-slide"></div> <div class="stage-3d-effect"><div class="effect-slide next-slide"></div></div>')}else{B.append('<div class="effect-slide curr-slide"></div> <div class="effect-slide next-slide"></div>')}}else{if(o.indexOf(F._settings.effect)>-1){B.addClass("stage-3d-effect").append('<div class="effect-slide curr-slide"></div> <div class="effect-slide next-slide"></div><div class="unfold-effect-slides"><div class="unfold-front"></div><div class="unfold-back"></div></div>')}}}function w(V,U,W){s=true;var T=F._settings.effect;A=U;D.removeClass("has-transition active").eq(A).addClass("active");D.addClass("hidden");B.addClass("show-effect");g(F._settings.beforeSwitch)&&F._settings.beforeSwitch(D.eq(U),D.eq(V));if(H.indexOf(F._settings.effect)>-1){B.find(".curr-slide").css("background-image","url("+r[V]+")");B.find(".next-slide").css("background-image","url("+r[U]+")");B.find(".effect-slide").css("animationDuration",F._settings.duration/1000+"s")}else{if(o.indexOf(F._settings.effect)>-1){}}B.find(".curr-slide,.unfold-front").css("background-image","url("+r[V]+")");B.find(".next-slide,.unfold-back").css("background-image","url("+r[U]+")");B.find(".unfold-effect-slides").css("animationDuration",F._settings.duration/1000+"s");if(W){B.addClass("reverse")}G();setTimeout(function(){g(F._settings.afterSwitch)&&F._settings.afterSwitch(D.eq(U),D.eq(V));D.removeClass("hidden");B.removeClass("show-effect reverse");if(H.indexOf(F._settings.effect)>-1){B.find(".curr-slide").attr("class","effect-slide curr-slide");B.find(".next-slide").attr("class","effect-slide next-slide")}s=false},F._settings.duration)}function S(){N=l.width();M=l.height();n()}function q(){z();t();F._settings.autoPlay&&K(true)}function z(){var W=f('<div class="slide-controls"> <ul class="slide-bullets"></ul> </div>'),T="";for(var U=0;U<m;U++){T+='<li class="slide-bullet"></li>'}W.find(".slide-bullets").append(T);if(!F.mobile){var V='<div class="slide-hotarea prev"><span class="slide-btn"></span></div><div class="slide-hotarea next"><span class="slide-btn "></span></div>';f(V).appendTo(W)}W.appendTo(l);P=l.find(".slide-bullet");P.eq(y).addClass("active")}function t(){l.find(".slide-bullet").click(function(U){if(s){return}i=f(this).index();if(i==A){return}w(A,i,i<A)});var T=F._settings.effect;if(!F.mobile){l.on("click",".slide-hotarea",function(U){if(s){return}if(f(this).hasClass("prev")){i=v(A-1);w(A,i,true)}if(f(this).hasClass("next")){i=v(A+1);w(A,i,false)}});if(F._settings._holdAfterHover){l.hover(function(){K(false)},function(){F._settings.autoPlay&&K(true)})}if(F._settings.mouseDrag){x()}}else{u()}}function u(){var X=new b(F._settings.obj);var U=A,T=false,W,V;X.start=function(Z,Y,aa){if(s){return}D.removeClass("has-transition");T=true;K(false);U=A;W=V=0};X.move=function(ac,Y,ad,aa,Z){if(aa!=0){V=aa%N;var ab=Math.floor(aa/N);ab>=0&&(ab+=1);i=v(U-ab);if(aa<0){A=v(i-1);W=N+V}else{if(aa>0){A=v(i+1);W=V-N}}D.each(function(ae,af){if(ae==A){f(this).addClass("draging").css("transform","translate3d("+V+"px,0,0)")}else{if(ae==i){f(this).addClass("draging").css("transform","translate3d("+W+"px,0,0)")}else{f(this).css("transform","translate3d(-"+N+"px,0,0)")}}});G()}};X.end=function(aa,ac,ab,Z,Y){if(s){return}if(T){T=false;D.removeClass("draging");if(Math.abs(V)/N>0.1){C(true,U)}else{C(false,U)}F._settings.autoPlay&&K(true)}}}function x(){if(F._settings.mouseDrag){var W=false,T=A,V,U;p.mousedown(function(Y){if(s){return}var X=Y.pageX;T=A;Y.preventDefault();D.removeClass("has-transition");V=U=0;W=true;f("body").mousemove(function(ab){ab.preventDefault();var aa=ab.pageX-X;if(aa!=0){U=aa%N;var Z=Math.floor(aa/N);Z>=0&&(Z+=1);i=v(T-Z);if(aa<0){A=v(i-1);V=N+U}else{if(aa>0){A=v(i+1);V=U-N}}D.each(function(ac,ad){if(ac==A){f(this).addClass("draging").css("transform","translate3d("+U+"px,0,0)")}else{if(ac==i){f(this).addClass("draging").css("transform","translate3d("+V+"px,0,0)")}else{f(this).css("transform","translate3d(-"+N+"px,0,0)")}}});G()}})});f("body").mouseup(function(X){if(s){return}if(W){f("body").off("mousemove");W=false;D.removeClass("draging");if(U==0){return}else{if(Math.abs(U)/N>0.1){C(true,T)}else{C(false,T)}}}})}}function L(){var T=[];if(a(F._settings.holdTime)){T=this._settings.holdTime}else{for(var U=0;U<m;U++){T[U]=F._settings.holdTime}}Q=setInterval(function(){var V=v(A+1);w(A,V)},T[A])}function K(T){clearInterval(Q);if(T){L()}}function C(U,T){if(A==i){return}D.addClass("has-transition");var V=0,W=0;if(U){W=0;V=i==v(A+1)?-1*N:N}else{V=0;W=i==v(A-1)?-1*N:N}D.eq(A).css("transform","translate3d("+V+"px,0,0)");D.eq(i).css("transform","translate3d("+W+"px,0,0)");A=U?i:A;T!=A&&g(F._settings.beforeSwitch)&&F._settings.beforeSwitch(D.eq(A),D.eq(T));G();D.removeClass("active").eq(A).addClass("active");setTimeout(function(){D.removeClass("has-transition");D.css("transform","translate3d(0,0,0");T!=A&&g(F._settings.afterSwitch)&&F._settings.afterSwitch(D.eq(A),D.eq(T))},300)}function G(){P.removeClass("active").eq(A).addClass("active")}function v(T){return T%m>=0?T%m:T%m+m}function E(){D.each(function(T,V){if(T>0){r[T]=F.mobileSize?f(this).attr("mb-bg-src"):f(this).attr("bg-src");if(r[T]){var U=document.createElement("img");U.src=r[T];f(U).one("load",function(){D.eq(T).css("background-image","url("+r[T]+")");O++;g(F._settings.onOneLoaded)&&F._settings.onOneLoaded(D.eq(T),T);if(O==m){l.removeClass("loading").addClass("loaded");q();g(F._settings.onAllLoaded)&&F._settings.onAllLoaded()}});if(U.complete){f(U).load()}}}})}}function b(i,j,l,n){this.available=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch;if(!this.available||!i){return}var p=document.querySelectorAll(i),s=this;if(p.length<1){return}s.start=j;s.move=l;s.end=n;var r,q,v,u;m();function m(){for(var w=0;w<p.length;w++){p[w].addEventListener("touchstart",k,false)}}function k(z){var B=z.touches[0],w=Number(B.pageX),A=Number(B.pageY);v=r=w;u=q=A;z.target.addEventListener("touchmove",o,false);z.target.addEventListener("touchend",t,false);s.start&&typeof s.start=="function"&&s.start(z,w,A)}function o(B){var D=B.touches[0],w=Number(D.pageX),C=Number(D.pageY);v=w;u=C;var A=w-r,z=C-q;s.move&&typeof s.move=="function"&&s.move(B,w,C,A,z)}function t(w){w.target.removeEventListener("touchmove",o,false);w.target.removeEventListener("touchend",t,false);s.end&&typeof s.end=="function"&&s.end(w,r,q,v,u)}s.destory=function(){for(var w=0;w<p.length;w++){e.target.removeEventListener("touchstart",this,false)}}}c.dcSlideShow=d;c.dcTouch=b})(jQuery,DcUI);